<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Audio Recorder - Demo</title>
  <link rel="stylesheet" href="demo.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>üéôÔ∏è Web Audio Recorder</h1>
      <p>Grave √°udio em WAV, OGG ou MP3 diretamente no navegador</p>
    </header>

    <main>
      <div class="controls">
        <div class="format-selector">
          <label for="format">Formato:</label>
          <select id="format" name="format">
            <option value="wav">WAV</option>
            <option value="ogg">OGG Vorbis</option>
            <option value="mp3">MP3</option>
          </select>
        </div>

        <div class="button-group">
          <button id="startBtn" class="btn btn-primary">üé§ Iniciar Grava√ß√£o</button>
          <button id="stopBtn" class="btn btn-danger" disabled>‚èπÔ∏è Parar</button>
          <button id="cancelBtn" class="btn btn-secondary" disabled>‚ùå Cancelar</button>
        </div>
      </div>

      <div class="status" id="status">
        <span class="status-indicator" id="statusIndicator"></span>
        <span id="statusText">Pronto para gravar</span>
      </div>

      <div class="audio-player" id="audioPlayer" style="display: none;">
        <h3>√Åudio Gravado:</h3>
        <audio id="audioElement" controls></audio>
        <div class="download-section">
          <button id="downloadBtn" class="btn btn-success">‚¨áÔ∏è Download</button>
        </div>
      </div>

      <div class="info">
        <h3>Informa√ß√µes:</h3>
        <ul>
          <li>Taxa de amostragem: <span id="sampleRate">-</span> Hz</li>
          <li>Canais: <span id="channels">-</span></li>
          <li>Dura√ß√£o: <span id="duration">-</span> segundos</li>
        </ul>
      </div>
    </main>
  </div>

  <!-- Carregar encoders Emscripten -->
  <script>
    // Configurar caminho dos arquivos .mem
    (function() {
      if (typeof window !== 'undefined') {
        // O caminho deve ser relativo ao arquivo .js, que est√° na raiz
        window.OggVorbisEncoderConfig = {
          memoryInitializerPrefixURL: '/'
        };
        window.Mp3LameEncoderConfig = {
          memoryInitializerPrefixURL: '/'
        };
      }
    })();
  </script>
  <!-- Pr√©-carregar scripts dos encoders (opcional, ser√£o carregados dinamicamente quando necess√°rio) -->
  <script type="module" src="demo.ts"></script>
</body>
</html>
